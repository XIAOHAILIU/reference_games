
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../favicon.ico">

    <title>Experiment</title>

    <!-- Bootstrap core CSS -->
    <link href="../../lib/css/bootstrap.min.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <!-- Custom styles for this template -->
    <link href="theme.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body role="document">

    <div class="container theme-showcase" role="main">

      </br>
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100" style="width: 5%;"><span class="sr-only">5% Complete</span></div>
      </div>

      <div class="page-header">
        <h1>Instructions</h1>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">

<h2><center>The colorful grid!</center>  </h2>

  <p>
    In this experiment you will play a fun communication game with
    another turker! In each round both of you are going to be shown three grid objects,
    consisting of various colors:
</p>
    <p>
      <center><img src="images/screenshot_objs.png" alt="Example objects" style="width:600px;"></center>
    </p>

<p>
    In each round, you will either be assigned the <b> Speaker </b> or <b> Listener </b> role in a game
    involving these grids, and you will alternate roles between rounds.  For a given round, one of the three grids
    is the target, which can be identified by the <b> Speaker </b> player by the green box around it.
    You will <i> only </i> see this green box if you are the <b> Speaker</b>, and your job will be to tell the
    <b> Listener </b> which one of the grids is the target.  On the other hand, if you're in the <b> Listener </b>
    role, you will have to select the grid based on what your partner in the <b> Speaker </b> role says.
    You'll both get a bonus of $0.01 for each correct response, so pay attention! Also, remember that it
    doesn't make sense to describe the <i> location </i> of the target grid, since the order of the images is different
    for the <b>Listener</b> and the <b>Speaker</b>.
</p>

<p>
      <center><img src="images/speakerView.png" alt="Example gameplay" style="width:600px;"></center>
    </p>
<p>
    <i> <center> <small> Only the <b> Speaker </b> can see that grid with the dark blue square on the top row is the target. </small> </center> </i>
</p>
<p>
    The overall goal is for the <b> Listener </b> to identify the correct grid
    based on what the <b> Speaker </b> has said. In order to communicate,
    you're given a chatbox where you can send messages back and forth
    to each other. The <b> Speaker </b> can say whatever they need to indicate
    which object is the target (this isn't a game of "taboo"!), and the
    <b> Listener </b> can respond or ask questions at any point. Some rounds
    will be easier and some will be harder. </p>

    <p> Once the <b> Speaker </b> sends a message and the <b> Listener </b> clicks on
    the object they believe is the target, both players will be given
    feedback (the <b> Speaker </b> will see what the <b> Listener </b> clicked, and the
    <b> Listener </b> will see the true target), and you will both be
    automatically forwarded to the next round of grids. There are a
    total of <b>60 rounds</b>. After the final round you will fill out a quick
    15 second survey and be on your way.
</p>

<p> A few final notes: First, since you are playing with another
  turker, you may see this screen before the game begins:
  <p>
    <center><img src="images/waitScreen.png" alt="initial matcher's board" style="width:700px;height:150px"></center>
  </p>
  Just hold tight. Another turker should join the game within the next
  few minutes. If you're in the waiting room 15 minutes without
  another player joining, your HIT will automatically be submitted and
  accepted, out of gratitude for the time you spent waiting.
</p>

<p>
  Second, because differences between colors can be quite subtle and
  difficult to describe, it is important that you and your partner are
  seeing the same thing. Turn your brightness up all the way, and turn
  off any software (like f.lux or redshift) that changes the colors on
  your monitor!
</p>

<p> Third, please be respectful of the turker you're playing with:
  they're real people, so do not send rude or inappropriate material
  through the chat box (including links or screenshots), and try to be
  as fast and responsive as possible to respect your partner's time:
  it can be very frustrating if your partner suddenly disappears and
  makes the task longer than anticipated. If your partner disconnects
  in the middle of the game, you will be sent to the survey and
  allowed to submit the HIT for full compensation.
</p>

<p> Finally, please DO NOT refresh the page at any point once you
  start the game (including the waiting page). If you refresh, you
  will not be able to rejoin the game you were in and you may not be
  able to submit the HIT. <br> Thank you!
</p>

<h4>
    Please fill out this short quiz below before getting started.
    Good luck and have fun!
</h4>


      </div>
      <div class="page-header">
        <h3>Comprehension Quiz</h3>
      </div>

     <div class="well" style="width:800px; margin: 0 auto">

  </br>
  The <b>Speaker</b> can click on a grid to end the round.
    </br>
    <input type="radio" name="dgoal" value="yes"> False
    </br>
    <input type="radio" name="dgoal" value="no"> True
    </br>


  </br>
  The <b>Listener</b> wants to click on the grid that the <b>Speaker</b> is
  telling them about.
      </br>
      <input type="radio" name="mgoal" value="no"> False
      </br>
      <input type="radio" name="mgoal" value="yes"> True
      </br>


  </br>
  Only the <b>Speaker</b> can send messages.
      </br>
      <input type="radio" name="message" value="yes"> False
      </br>
      <input type="radio" name="message" value="no"> True
      </br>

  </br>
  There are a total of 60 rounds.
      </br>
      <input type="radio" name="comp" value="yes"> True
      </br>
      <input type="radio" name="comp" value="no"> False
      </br>

  </br>
  The order of the grid images are guaranteed to be same for the <b>Speaker</b> and the <b>Listener</b>.
      </br>
      <input type="radio" name="location" value="no"> True
      </br>
      <input type="radio" name="location" value="yes"> False
      </br>

   </br>
  <!--Have you participated in this study before?
        </br>
        <input type="radio" name="completed" value="no"> Yes
        </br>
        <input type="radio" name="completed" value="yes"> No
        </br>

  </br> -->
    <input id="quiz_submit" type="submit" value="Submit">
      </br>
      </br>
  <div class="error" style="display:none"> Ooops! Looks like you made a mistake. You have one more try. </div>
    </div> <!-- /container -->
      </div>
    <script type="text/javascript">
      $('html,body').scrollTop(0);
      var urlParams;
  var match,
        pl     = /\+/g,  // Regex for replacing addition symbol with a space
        search = /([^&=]+)=?([^&]*)/g,
        decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
        query  = location.search.substring(1);

      urlParams = {};
      while (match = search.exec(query))
      urlParams[decode(match[1])] = decode(match[2]);

      console.log(urlParams)

      var counter = 0;
      document.getElementById("quiz_submit").onclick = function () {
        var ans1 = $('input[name="dgoal"]:checked').val();
        var ans2 = $('input[name="mgoal"]:checked').val();
        var ans3 = $('input[name="message"]:checked').val();
        var ans4 = $('input[name="comp"]:checked').val();
        var ans5 = $('input[name="location"]:checked').val();
        //var ans6 = $('input[name="completed"]:checked').val();

        if(ans1 == "yes" && ans2 == "yes" && ans3 == "yes" &&
           ans4 == "yes" && ans5 == "yes"/* && ans6 == "yes"*/) {
           var workerId = urlParams.workerId;
           var assignmentId = urlParams.assignmentId;
           var hitId = urlParams.hitId;
           var turkSubmitTo = urlParams.turkSubmitTo;
           location.replace("./pass.html?workerId=" + workerId
                            + "&assignmentId=" + assignmentId
                            + "&hitId=" + hitId + "&turkSubmitTo=" + turkSubmitTo);
        } else if(counter == 3) {
          location.replace("./fail.html");
        } else {
          $('.error').show()
          counter += 1;
        }
      };
    </script>

    <script src="./validate-form.js"></script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="../../lib/js/bootstrap.min.js"></script>
  </body>
</html>
